<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>本日の出席者一覧</title>
</head>
<body>

  <h1 th:text="'本日の出席者一覧（' + ${date} + '）'"></h1>
  <hr>

  <!-- 出席者がいない場合のメッセージ -->
  <p th:if="${#lists.isEmpty(attendanceList)}">本日の出席者はまだいません。</p>

  <table border="1">
    <thead>
      <tr>
        <th>ユニット</th>
        <th>名前</th>
        <th>出欠</th>
        <th>日付</th>
        <th>操作</th>
      </tr>
    </thead>

	<tbody>
	  <tr th:each="a : ${attendanceList}">
	    <td colspan="5">
	      <form th:action="@{/attendance/update/status}" method="post"
	            style="display:flex; gap:8px; align-items:center;">

	        <input type="hidden"
	               name="attendanceId"
	               th:value="${a.attendanceId}" />

	        <span th:text="${a.unit}"></span>
	        <span th:text="${a.username}"></span>

	        <select name="status">
	          <option value="ATTEND"
	                  th:selected="${a.status == 'ATTEND'}">出席</option>
	          <option value="ABSENT"
	                  th:selected="${a.status == 'ABSENT'}">欠席</option>
	        </select>

	        <input type="date"
	               name="inputDate"
	               th:value="${a.inputDate}" />

	        <button type="submit">更新</button>

	      </form>
	    </td>
	  </tr>
	</tbody>
  </table>

  <a href="/attendance">戻る</a>

</body>
</html>
